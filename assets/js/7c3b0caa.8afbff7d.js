"use strict";(globalThis.webpackChunkverilua_docs=globalThis.webpackChunkverilua_docs||[]).push([[667],{2436:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"reference/simulator_control","title":"\u4eff\u771f\u5668\u63a7\u5236","description":"Verilua \u63d0\u4f9b\u4e86\u4e00\u4e9b\u63a5\u53e3\u7528\u6765\u63a7\u5236\u5e95\u5c42\u7684\u4eff\u771f\u5668\uff1a","source":"@site/../docs/reference/simulator_control.mdx","sourceDirName":"reference","slug":"/reference/simulator_control","permalink":"/verilua/docs/reference/simulator_control","draft":false,"unlisted":false,"editUrl":"https://github.com/cyril0124/verilua/tree/master/../docs/reference/simulator_control.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"String Literal Constructor Pattern (SLCP)","permalink":"/verilua/docs/reference/slcp"},"next":{"title":"Testbench \u81ea\u52a8\u751f\u6210\u6d41\u7a0b","permalink":"/verilua/docs/reference/testbench_generate"}}');var i=s(4848),c=s(8453);const l={},t="\u4eff\u771f\u5668\u63a7\u5236",d={},o=[];function h(e){const n={code:"code",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u4eff\u771f\u5668\u63a7\u5236",children:"\u4eff\u771f\u5668\u63a7\u5236"})}),"\n",(0,i.jsx)(n.p,{children:"Verilua \u63d0\u4f9b\u4e86\u4e00\u4e9b\u63a5\u53e3\u7528\u6765\u63a7\u5236\u5e95\u5c42\u7684\u4eff\u771f\u5668\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"sim.dump_wave(trace_file_path)"})}),"\n",(0,i.jsx)(n.p,{children:"\u7528\u6765\u63a7\u5236\u4eff\u771f\u5668\u5f00\u59cb\u751f\u6210\u6ce2\u5f62\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u53c2\u6570"}),"\uff1a","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"trace_file_path"})," (\u53ef\u9009, string)\uff1a\u6ce2\u5f62\u6587\u4ef6\u540d\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u9ed8\u8ba4\u751f\u6210 ",(0,i.jsx)(n.code,{children:"test.vcd"}),"\uff08\u6216 ",(0,i.jsx)(n.code,{children:"test.vcd.fsdb"}),"\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8bf4\u660e"}),"\uff1a","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5bf9\u4e8e Verilator\uff0c\u9700\u8981\u5728 ",(0,i.jsx)(n.code,{children:"xmake.lua"})," \u4e2d\u6dfb\u52a0 ",(0,i.jsx)(n.code,{children:'add_values("verilator.flags", "--trace", "--no-trace-top")'})," \u4ee5\u542f\u7528\u6ce2\u5f62\u751f\u6210\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5bf9\u4e8e Xcelium\uff0c\u82e5\u672a\u6307\u5b9a\u6587\u4ef6\u540d\uff0c\u5c06\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"waves.shm"}),"\uff1b\u82e5\u6307\u5b9a\uff0c\u5219\u6839\u636e\u6587\u4ef6\u6269\u5c55\u540d\u51b3\u5b9a\u6ce2\u5f62\u683c\u5f0f\uff08",(0,i.jsx)(n.code,{children:".vcd"})," \u4e3a VCD\uff0c",(0,i.jsx)(n.code,{children:".fsdb"})," \u4e3a FSDB\uff09\u3002FSDB \u683c\u5f0f\u9700\u8bbe\u7f6e ",(0,i.jsx)(n.code,{children:"VERDI_HOME"})," \u5e76\u542f\u7528\u76f8\u5e94\u5b8f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u793a\u4f8b"}),"\uff1a","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'sim.dump_wave() -- \u9ed8\u8ba4 test.vcd\nsim.dump_wave("./wave/trace.vcd")\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"sim.disable_trace()"})}),"\n",(0,i.jsx)(n.p,{children:"\u7528\u6765\u63a7\u5236\u4eff\u771f\u5668\u505c\u6b62\u751f\u6210\u6ce2\u5f62\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"sim.finish()"})}),"\n",(0,i.jsx)(n.p,{children:"\u7528\u6765\u63a7\u5236\u7ed3\u675f\u4eff\u771f\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"sim.get_sim_time(unit?)"})}),"\n",(0,i.jsx)(n.p,{children:"\u83b7\u53d6\u5f53\u524d\u4eff\u771f\u65f6\u95f4\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u53c2\u6570"}),"\uff1a","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"unit"})," (\u53ef\u9009, string)\uff1a\u65f6\u95f4\u5355\u4f4d\uff0c\u652f\u6301 ",(0,i.jsx)(n.code,{children:'"fs"'}),", ",(0,i.jsx)(n.code,{children:'"ps"'}),", ",(0,i.jsx)(n.code,{children:'"ns"'}),", ",(0,i.jsx)(n.code,{children:'"us"'}),", ",(0,i.jsx)(n.code,{children:'"ms"'}),", ",(0,i.jsx)(n.code,{children:'"s"'}),"\u3002\u82e5\u4e0d\u6307\u5b9a\uff0c\u8fd4\u56de\u4eff\u771f\u5668\u539f\u59cb\u6b65\u6570\uff08steps\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8fd4\u56de\u503c"}),"\uff1anumber \u7c7b\u578b\u7684\u4eff\u771f\u65f6\u95f4\u503c\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8bf4\u660e"}),"\uff1a","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8fd4\u56de\u7684\u65f6\u95f4\u503c\u4e0e\u4eff\u771f\u5668\u7684\u65f6\u95f4\u7cbe\u5ea6\u76f8\u5173\u3002\u9ed8\u8ba4 Verilua \u7684 ",(0,i.jsx)(n.code,{children:"timescale"})," \u4e3a ",(0,i.jsx)(n.code,{children:"1ns/1ps"}),"\uff0c\u56e0\u6b64\u539f\u59cb\u6b65\u6570\u5355\u4f4d\u662f 1ps\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u53ef\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"cfg.time_precision"})," \u548c ",(0,i.jsx)(n.code,{children:"cfg.time_unit"})," \u67e5\u770b\u5f53\u524d\u7cbe\u5ea6\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u793a\u4f8b"}),"\uff1a","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'local steps = sim.get_sim_time()       -- \u539f\u59cb\u6b65\u6570\nlocal ns = sim.get_sim_time("ns")      -- \u8f6c\u6362\u4e3a\u7eb3\u79d2\nlocal ps = sim.get_sim_time("ps")      -- \u8f6c\u6362\u4e3a\u76ae\u79d2\nprint(string.format("Time: %d ns", ns))\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var r=s(6540);const i={},c=r.createContext(i);function l(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);