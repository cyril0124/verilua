"use strict";(globalThis.webpackChunkverilua_docs=globalThis.webpackChunkverilua_docs||[]).push([[414],{5225:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>t});const d=JSON.parse('{"id":"reference/slcp","title":"String Literal Constructor Pattern (SLCP)","description":"SLCP\uff08String Literal Constructor Pattern\uff0c\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u6784\u9020\u5668\u6a21\u5f0f\uff09\u662f Verilua \u4e2d\u7684\u4e00\u79cd\u6838\u5fc3\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u901a\u8fc7\u6269\u5c55 Lua \u7684 string \u5e93\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u6765\u6784\u5efa\u5404\u79cd Verilua \u6570\u636e\u7ed3\u6784\uff0c\u800c\u65e0\u9700\u663e\u5f0f require \u76f8\u5e94\u7684\u6a21\u5757\u3002","source":"@site/../docs/reference/slcp.mdx","sourceDirName":"reference","slug":"/reference/slcp","permalink":"/verilua/docs/reference/slcp","draft":false,"unlisted":false,"editUrl":"https://github.com/cyril0124/verilua/tree/master/../docs/reference/slcp.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"BitVec","permalink":"/verilua/docs/reference/bitvec"},"next":{"title":"\u4eff\u771f\u5668\u63a7\u5236","permalink":"/verilua/docs/reference/simulator_control"}}');var r=l(4848),a=l(8453);const i={},c="String Literal Constructor Pattern (SLCP)",s={},t=[{value:"\u8bbe\u8ba1\u52a8\u673a",id:"\u8bbe\u8ba1\u52a8\u673a",level:2},{value:"\u6838\u5fc3\u539f\u7406",id:"\u6838\u5fc3\u539f\u7406",level:2},{value:"\u652f\u6301\u7684\u6784\u9020\u5668",id:"\u652f\u6301\u7684\u6784\u9020\u5668",level:2},{value:"\u8be6\u7ec6\u7528\u6cd5",id:"\u8be6\u7ec6\u7528\u6cd5",level:2},{value:"CallableHDL \u6784\u9020",id:"callablehdl-\u6784\u9020",level:3},{value:"Bundle \u6784\u9020",id:"bundle-\u6784\u9020",level:3},{value:"AliasBundle \u6784\u9020",id:"aliasbundle-\u6784\u9020",level:3},{value:"BitVec \u6784\u9020",id:"bitvec-\u6784\u9020",level:3},{value:"EventHandle \u6784\u9020",id:"eventhandle-\u6784\u9020",level:3},{value:"\u865a\u62df\u4fe1\u53f7\u6784\u9020",id:"\u865a\u62df\u4fe1\u53f7\u6784\u9020",level:3},{value:"\u81ea\u52a8 Bundle \u6784\u9020",id:"\u81ea\u52a8-bundle-\u6784\u9020",level:3},{value:"\u5176\u4ed6\u5b57\u7b26\u4e32\u6269\u5c55\u65b9\u6cd5",id:"\u5176\u4ed6\u5b57\u7b26\u4e32\u6269\u5c55\u65b9\u6cd5",level:2},{value:"\u5b57\u7b26\u4e32\u6e32\u67d3",id:"\u5b57\u7b26\u4e32\u6e32\u67d3",level:3},{value:"\u6570\u503c\u8f6c\u6362",id:"\u6570\u503c\u8f6c\u6362",level:3},{value:"\u5b50\u4e32\u68c0\u67e5",id:"\u5b50\u4e32\u68c0\u67e5",level:3},{value:"\u540e\u7f00\u79fb\u9664",id:"\u540e\u7f00\u79fb\u9664",level:3},{value:"\u679a\u4e3e\u5b9a\u4e49",id:"\u679a\u4e3e\u5b9a\u4e49",level:3},{value:"TCC \u7f16\u8bd1",id:"tcc-\u7f16\u8bd1",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f18\u5148\u4f7f\u7528 SLCP",id:"1-\u4f18\u5148\u4f7f\u7528-slcp",level:3},{value:"2. \u4f7f\u7528\u591a\u884c\u683c\u5f0f\u63d0\u9ad8\u53ef\u8bfb\u6027",id:"2-\u4f7f\u7528\u591a\u884c\u683c\u5f0f\u63d0\u9ad8\u53ef\u8bfb\u6027",level:3},{value:"3. \u5408\u7406\u4f7f\u7528\u522b\u540d",id:"3-\u5408\u7406\u4f7f\u7528\u522b\u540d",level:3},{value:"4. \u7ed3\u5408 dut \u4f7f\u7528",id:"4-\u7ed3\u5408-dut-\u4f7f\u7528",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"string-literal-constructor-pattern-slcp",children:"String Literal Constructor Pattern (SLCP)"})}),"\n",(0,r.jsxs)(n.p,{children:["SLCP\uff08String Literal Constructor Pattern\uff0c\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u6784\u9020\u5668\u6a21\u5f0f\uff09\u662f Verilua \u4e2d\u7684\u4e00\u79cd\u6838\u5fc3\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u901a\u8fc7\u6269\u5c55 Lua \u7684 ",(0,r.jsx)(n.code,{children:"string"})," \u5e93\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u6765\u6784\u5efa\u5404\u79cd Verilua \u6570\u636e\u7ed3\u6784\uff0c\u800c\u65e0\u9700\u663e\u5f0f ",(0,r.jsx)(n.code,{children:"require"})," \u76f8\u5e94\u7684\u6a21\u5757\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u8bbe\u8ba1\u52a8\u673a",children:"\u8bbe\u8ba1\u52a8\u673a"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u4f20\u7edf\u7684 Lua \u7f16\u7a0b\u4e2d\uff0c\u6784\u5efa\u4e00\u4e2a\u5bf9\u8c61\u901a\u5e38\u9700\u8981\u5148 ",(0,r.jsx)(n.code,{children:"require"})," \u5bf9\u5e94\u7684\u6a21\u5757\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local CallableHDL = require "LuaCallableHDL"\nlocal Bundle = require "LuaBundle"\n\nlocal clock = CallableHDL("clock", "tb_top.clock")\nlocal bdl = Bundle({"valid", "ready"}, "", "tb_top.dut", "my_bundle", true)\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u79cd\u65b9\u5f0f\u867d\u7136\u6e05\u6670\uff0c\u4f46\u5728\u786c\u4ef6\u9a8c\u8bc1\u573a\u666f\u4e2d\u5b58\u5728\u4e00\u4e9b\u4e0d\u4fbf\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5bfc\u5165\u7e41\u7410"}),"\uff1a\u6bcf\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u90fd\u9700\u8981\u5bfc\u5165\u591a\u4e2a\u6a21\u5757"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4ee3\u7801\u5197\u957f"}),"\uff1a\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\u53ef\u80fd\u5f88\u957f"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u964d\u4f4e\u53ef\u8bfb\u6027"}),"\uff1a\u771f\u6b63\u7684\u4e1a\u52a1\u903b\u8f91\u88ab\u5927\u91cf\u7684\u6a21\u677f\u4ee3\u7801\u6df9\u6ca1"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"SLCP \u7684\u8bbe\u8ba1\u76ee\u6807\u5c31\u662f\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u8ba9\u7528\u6237\u80fd\u591f\u4ee5\u66f4\u7b80\u6d01\u3001\u66f4\u76f4\u89c2\u7684\u65b9\u5f0f\u6784\u5efa Verilua \u6570\u636e\u7ed3\u6784\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u6838\u5fc3\u539f\u7406",children:"\u6838\u5fc3\u539f\u7406"}),"\n",(0,r.jsxs)(n.p,{children:["SLCP \u5229\u7528\u4e86 Lua \u8bed\u8a00\u7684\u4e00\u4e2a\u91cd\u8981\u7279\u6027\uff1a",(0,r.jsx)(n.strong,{children:"\u6240\u6709\u5b57\u7b26\u4e32\u5171\u4eab\u540c\u4e00\u4e2a metatable"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 Lua \u4e2d\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 metatable \u7684 ",(0,r.jsx)(n.code,{children:"__index"})," \u5b57\u6bb5\u6307\u5411 ",(0,r.jsx)(n.code,{children:"string"})," \u8868\u3002\u8fd9\u610f\u5473\u7740\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u8fd9\u4e24\u79cd\u5199\u6cd5\u662f\u7b49\u4ef7\u7684\nlocal upper = string.upper("hello")\nlocal upper = ("hello"):upper()\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u57fa\u4e8e\u8fd9\u4e2a\u7279\u6027\uff0cVerilua \u5411 ",(0,r.jsx)(n.code,{children:"string"})," \u8868\u6dfb\u52a0\u4e86\u4e00\u7cfb\u5217\u65b9\u6cd5\uff0c\u4f7f\u5f97\u6240\u6709\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u90fd\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5\u6765\u6784\u5efa\u5404\u79cd\u6570\u636e\u7ed3\u6784\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u5411 string \u8868\u6dfb\u52a0\u65b9\u6cd5\nstring.chdl = function(hierpath, hdl)\n    return CallableHDL(hierpath, "", hdl)\nend\n\n-- \u7136\u540e\u5c31\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\nlocal clock = ("tb_top.clock"):chdl()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u652f\u6301\u7684\u6784\u9020\u5668",children:"\u652f\u6301\u7684\u6784\u9020\u5668"}),"\n",(0,r.jsx)(n.p,{children:"\u4e0b\u8868\u5217\u51fa\u4e86 SLCP \u652f\u6301\u7684\u6240\u6709\u6784\u9020\u5668\u65b9\u6cd5\uff1a"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(n.th,{children:"\u8fd4\u56de\u7c7b\u578b"}),(0,r.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:hdl()"})}),(0,r.jsx)(n.td,{children:"ComplexHandleRaw"}),(0,r.jsx)(n.td,{children:"\u83b7\u53d6 VPI \u5e95\u5c42\u53e5\u67c4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:hdl_safe()"})}),(0,r.jsx)(n.td,{children:"ComplexHandleRaw"}),(0,r.jsx)(n.td,{children:"\u5b89\u5168\u83b7\u53d6 VPI \u53e5\u67c4\uff08\u4e0d\u5b58\u5728\u8fd4\u56de -1\uff09"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:chdl()"})}),(0,r.jsx)(n.td,{children:"CallableHDL"}),(0,r.jsx)(n.td,{children:"\u6784\u5efa\u53ef\u8c03\u7528\u4fe1\u53f7\u53e5\u67c4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:fake_chdl{}"})}),(0,r.jsx)(n.td,{children:"CallableHDL"}),(0,r.jsx)(n.td,{children:"\u6784\u5efa\u865a\u62df\u4fe1\u53f7\u53e5\u67c4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:bdl{...}"})}),(0,r.jsx)(n.td,{children:"Bundle"}),(0,r.jsx)(n.td,{children:"\u6784\u5efa\u4fe1\u53f7\u7ec4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:bundle{...}"})}),(0,r.jsx)(n.td,{children:"Bundle"}),(0,r.jsxs)(n.td,{children:["\u540c ",(0,r.jsx)(n.code,{children:":bdl{...}"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:abdl{...}"})}),(0,r.jsx)(n.td,{children:"AliasBundle"}),(0,r.jsx)(n.td,{children:"\u6784\u5efa\u5e26\u522b\u540d\u7684\u4fe1\u53f7\u7ec4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:ehdl()"})}),(0,r.jsx)(n.td,{children:"EventHandle"}),(0,r.jsx)(n.td,{children:"\u6784\u5efa\u4e8b\u4ef6\u53e5\u67c4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:bv()"})}),(0,r.jsx)(n.td,{children:"BitVec"}),(0,r.jsx)(n.td,{children:"\u6784\u5efa\u4f4d\u5411\u91cf"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:bit_vec()"})}),(0,r.jsx)(n.td,{children:"BitVec"}),(0,r.jsxs)(n.td,{children:["\u540c ",(0,r.jsx)(n.code,{children:":bv()"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<str>:auto_bundle{}"})}),(0,r.jsx)(n.td,{children:"Bundle"}),(0,r.jsx)(n.td,{children:"\u81ea\u52a8\u6784\u5efa\u4fe1\u53f7\u7ec4"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u8be6\u7ec6\u7528\u6cd5",children:"\u8be6\u7ec6\u7528\u6cd5"}),"\n",(0,r.jsx)(n.h3,{id:"callablehdl-\u6784\u9020",children:"CallableHDL \u6784\u9020"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"CallableHDL"})," \u662f Verilua \u4e2d\u6700\u5e38\u7528\u7684\u4fe1\u53f7\u53e5\u67c4\u7c7b\u578b\uff0c\u7528\u4e8e\u8bfb\u5199\u786c\u4ef6\u4fe1\u53f7\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u57fa\u672c\u7528\u6cd5\nlocal clock = ("tb_top.clock"):chdl()\nlocal reset = ("tb_top.reset"):chdl()\n\n-- \u8bbf\u95ee\u6df1\u5c42\u4fe1\u53f7\nlocal data = ("tb_top.u_dut.path.to.data"):chdl()\n\n-- \u4f7f\u7528\u4fe1\u53f7\nclock:posedge()           -- \u7b49\u5f85\u4e0a\u5347\u6cbf\nlocal value = data:get()  -- \u8bfb\u53d6\u503c\ndata:set(0x123)           -- \u8bbe\u7f6e\u503c\n'})}),"\n",(0,r.jsx)(n.h3,{id:"bundle-\u6784\u9020",children:"Bundle \u6784\u9020"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Bundle"})," \u7528\u4e8e\u5c06\u591a\u4e2a\u76f8\u5173\u4fe1\u53f7\u7ec4\u7ec7\u5728\u4e00\u8d77\uff0c\u7279\u522b\u9002\u5408\u5904\u7406\u63a5\u53e3\u4fe1\u53f7\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u57fa\u672c Bundle\nlocal io = ("valid | ready | data | addr"):bdl {\n    hier = "tb_top.u_dut",\n    prefix = "io_",\n    name = "IO Bundle"\n}\n\n-- \u8bbf\u95ee\u4fe1\u53f7\nio.valid:set(1)\nio.data:set(0xABCD)\n\n-- Decoupled Bundle\uff08\u7c7b\u4f3c Chisel \u7684 DecoupledIO\uff09\nlocal axi_ch = ("valid | ready | data | id"):bdl {\n    hier = "tb_top.u_dut",\n    prefix = "axi_w_",\n    is_decoupled = true,\n    name = "AXI Write Channel"\n}\n\n-- \u68c0\u67e5\u63e1\u624b\nif axi_ch:fire() then\n    print("Transaction completed!")\nend\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u591a\u884c\u683c\u5f0f\uff08\u63a8\u8350\u7528\u4e8e\u8f83\u591a\u4fe1\u53f7\u7684\u60c5\u51b5\uff09\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local bus = ([[\n    | valid\n    | ready\n    | address\n    | data\n    | strobe\n    | resp\n]]):bdl {\n    hier = "tb_top.u_bus",\n    prefix = "bus_",\n    is_decoupled = true,\n    name = "Bus Interface"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u9009\u4fe1\u53f7\uff08\u4f7f\u7528\u65b9\u62ec\u53f7\u8bed\u6cd5\uff09\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u4f7f\u7528\u65b9\u62ec\u53f7\u6807\u8bb0\u53ef\u9009\u4fe1\u53f7\nlocal io = ([[\n    | valid\n    | ready\n    | data\n    | [debug_info]  -- \u53ef\u9009\u4fe1\u53f7\uff0c\u4e0d\u5b58\u5728\u65f6\u4e0d\u4f1a\u62a5\u9519\n]]):bdl {\n    hier = "tb_top.u_dut",\n    prefix = "io_"\n}\n\n-- \u65e7\u65b9\u6cd5\uff08\u4ecd\u7136\u6709\u6548\uff09\nlocal io_old = ("valid | ready | data | debug_info"):bdl {\n    hier = "tb_top.u_dut",\n    prefix = "io_",\n    optional_signals = {"debug_info"}\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"aliasbundle-\u6784\u9020",children:"AliasBundle \u6784\u9020"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"AliasBundle"})," \u5141\u8bb8\u4e3a\u4fe1\u53f7\u521b\u5efa\u522b\u540d\uff0c\u63d0\u9ad8\u4ee3\u7801\u53ef\u8bfb\u6027\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u4f7f\u7528 => \u521b\u5efa\u522b\u540d\nlocal ctrl = ([[\n    | io_in_start => start\n    | io_in_stop  => stop\n    | io_out_done => done\n    | io_out_error => error\n]]):abdl {\n    hier = "tb_top.u_ctrl",\n    name = "Control Signals"\n}\n\n-- \u901a\u8fc7\u522b\u540d\u8bbf\u95ee\nctrl.start:set(1)\nif ctrl.done:get() == 1 then\n    print("Operation completed!")\nend\n\n-- \u652f\u6301\u591a\u4e2a\u522b\u540d\uff08\u7528 / \u5206\u9694\uff09\nlocal sig = ([[\n    | some_very_long_signal_name => short/alias1/alias2\n]]):abdl {\n    hier = "tb_top"\n}\n\n-- \u4ee5\u4e0b\u8bbf\u95ee\u65b9\u5f0f\u90fd\u662f\u7b49\u4ef7\u7684\nsig.short:get()\nsig.alias1:get()\nsig.alias2:get()\n\n-- \u53ef\u9009\u4fe1\u53f7\uff08\u4f7f\u7528\u65b9\u62ec\u53f7\u8bed\u6cd5\uff09\nlocal ctrl_with_opt = ([[\n    | io_in_start => start\n    | io_in_stop  => stop\n    | [io_debug_port => debug]\n]]):abdl {\n    hier = "tb_top.u_ctrl"\n}\n\n-- \u65e7\u65b9\u6cd5\uff08\u4ecd\u7136\u6709\u6548\uff09\nlocal ctrl_old = ([[\n    | io_in_start => start\n    | io_in_stop  => stop\n    | io_debug_port => debug\n]]):abdl {\n    hier = "tb_top.u_ctrl",\n    optional_signals = {"debug"}\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u652f\u6301\u5b57\u7b26\u4e32\u63d2\u503c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local ch = ([[\n    | channel_{n}_valid => valid\n    | channel_{n}_data  => data\n]]):abdl {\n    hier = "tb_top.u_router",\n    n = 3  -- \u5c06 {n} \u66ff\u6362\u4e3a 3\n}\n-- \u5b9e\u9645\u4fe1\u53f7\u8def\u5f84: tb_top.u_router.channel_3_valid\n'})}),"\n",(0,r.jsx)(n.h3,{id:"bitvec-\u6784\u9020",children:"BitVec \u6784\u9020"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"BitVec"})," \u7528\u4e8e\u5904\u7406\u5927\u4f4d\u5bbd\u7684\u6570\u636e\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u4ece\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u6784\u9020\nlocal bv = ("deadbeef"):bv(128)  -- 128 \u4f4d\u7684 BitVec\n\n-- \u64cd\u4f5c\u4f4d\u5b57\u6bb5\nlocal field = bv:get_bitfield(0, 31)\nbv:set_bitfield(32, 63, 0x12345678)\n\n-- \u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\nlocal hex_str = bv:get_bitfield_hex_str(0, 127)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"eventhandle-\u6784\u9020",children:"EventHandle \u6784\u9020"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"EventHandle"})," \u7528\u4e8e\u4efb\u52a1\u95f4\u7684\u540c\u6b65\u4e0e\u901a\u4fe1\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u521b\u5efa\u4e8b\u4ef6\u53e5\u67c4\nlocal tx_done = ("tx_complete"):ehdl()\nlocal rx_ready = ("rx_ready"):ehdl(1)  -- \u5e26 ID\n\n-- \u5728\u4e00\u4e2a\u4efb\u52a1\u4e2d\u7b49\u5f85\u4e8b\u4ef6\nfork {\n    function()\n        tx_done:wait()\n        print("TX completed!")\n    end\n}\n\n-- \u5728\u53e6\u4e00\u4e2a\u4efb\u52a1\u4e2d\u89e6\u53d1\u4e8b\u4ef6\ntx_done:fire()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u865a\u62df\u4fe1\u53f7\u6784\u9020",children:"\u865a\u62df\u4fe1\u53f7\u6784\u9020"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"fake_chdl"})," \u7528\u4e8e\u521b\u5efa\u4e0d\u5b58\u5728\u4e8e\u5b9e\u9645\u8bbe\u8ba1\u4e2d\u7684\u865a\u62df\u4fe1\u53f7\uff0c\u4fbf\u4e8e\u6d4b\u8bd5\u548c\u8c03\u8bd5\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local fake_sig = ("virtual.signal"):fake_chdl {\n    get = function(self)\n        return 42  -- \u603b\u662f\u8fd4\u56de 42\n    end,\n    set = function(self, value)\n        print("Setting virtual signal to", value)\n    end,\n    is = function(self, value)\n        return value == 42\n    end\n}\n\n-- \u50cf\u666e\u901a\u4fe1\u53f7\u4e00\u6837\u4f7f\u7528\nassert(fake_sig:get() == 42)\nfake_sig:set(100)  -- \u6253\u5370 "Setting virtual signal to 100"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u81ea\u52a8-bundle-\u6784\u9020",children:"\u81ea\u52a8 Bundle \u6784\u9020"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"auto_bundle"})," \u53ef\u4ee5\u6839\u636e\u6a21\u5f0f\u81ea\u52a8\u5339\u914d\u4fe1\u53f7\u521b\u5efa Bundle\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u4f7f\u7528 SignalDB \u81ea\u52a8\u53d1\u73b0\u4fe1\u53f7\nlocal io_bdl = ("tb_top.u_dut"):auto_bundle {\n    startswith = "io_in_",  -- \u5339\u914d\u4ee5 io_in_ \u5f00\u5934\u7684\u4fe1\u53f7\n}\n\n-- \u66f4\u591a\u5339\u914d\u9009\u9879\nlocal data_bdl = ("tb_top.u_dut"):auto_bundle {\n    endswith = "_data",      -- \u5339\u914d\u4ee5 _data \u7ed3\u5c3e\u7684\u4fe1\u53f7\n}\n\nlocal wide_bdl = ("tb_top.u_dut"):auto_bundle {\n    filter = function(name, width)\n        return width >= 32   -- \u53ea\u5305\u542b\u4f4d\u5bbd >= 32 \u7684\u4fe1\u53f7\n    end\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5176\u4ed6\u5b57\u7b26\u4e32\u6269\u5c55\u65b9\u6cd5",children:"\u5176\u4ed6\u5b57\u7b26\u4e32\u6269\u5c55\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u9664\u4e86\u6570\u636e\u7ed3\u6784\u6784\u9020\u5668\uff0cSLCP \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5b9e\u7528\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u65b9\u6cd5\uff1a"}),"\n",(0,r.jsx)(n.h3,{id:"\u5b57\u7b26\u4e32\u6e32\u67d3",children:"\u5b57\u7b26\u4e32\u6e32\u67d3"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local template = "Hello {{name}}, your score is {{score}}!"\nlocal result = template:render({\n    name = "Alice",\n    score = 100\n})\n-- result: "Hello Alice, your score is 100!"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u6570\u503c\u8f6c\u6362",children:"\u6570\u503c\u8f6c\u6362"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u652f\u6301\u591a\u79cd\u8fdb\u5236\nlocal dec = ("42"):number()      -- 42\nlocal hex = ("0x2A"):number()    -- 42\nlocal bin = ("0b101010"):number() -- 42\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5b50\u4e32\u68c0\u67e5",children:"\u5b50\u4e32\u68c0\u67e5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local s = "hello world"\nassert(s:contains("world") == true)\nassert(s:contains("moon") == false)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u540e\u7f00\u79fb\u9664",children:"\u540e\u7f00\u79fb\u9664"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local s = "signal_valid"\nlocal result = s:strip("_valid")  -- "signal"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u679a\u4e3e\u5b9a\u4e49",children:"\u679a\u4e3e\u5b9a\u4e49"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local Color = ("Color"):enum_define {\n    Red = 1,\n    Green = 2,\n    Blue = 3\n}\n\nassert(Color.Red == 1)\nassert(Color(1) == "Red")  -- \u53cd\u5411\u67e5\u627e\n'})}),"\n",(0,r.jsx)(n.h3,{id:"tcc-\u7f16\u8bd1",children:"TCC \u7f16\u8bd1"}),"\n",(0,r.jsx)(n.p,{children:"SLCP \u8fd8\u652f\u6301\u5728\u8fd0\u884c\u65f6\u7f16\u8bd1 C \u4ee3\u7801\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local lib = ([[\n    int add(int a, int b) {\n        return a + b;\n    }\n]]):tcc_compile({\n    {sym = "add", ptr = "int (*)(int, int)"}\n})\n\nlocal result = lib.add(1, 2)  -- 3\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u4f18\u5148\u4f7f\u7528-slcp",children:"1. \u4f18\u5148\u4f7f\u7528 SLCP"}),"\n",(0,r.jsxs)(n.p,{children:["\u5bf9\u4e8e\u7b80\u5355\u7684\u4fe1\u53f7\u8bbf\u95ee\uff0c\u4f18\u5148\u4f7f\u7528 SLCP \u800c\u4e0d\u662f\u4f20\u7edf\u7684 ",(0,r.jsx)(n.code,{children:"require"})," \u65b9\u5f0f\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u63a8\u8350\nlocal clock = ("tb_top.clock"):chdl()\n\n-- \u4e0d\u63a8\u8350\uff08\u9664\u975e\u9700\u8981\u66f4\u591a\u63a7\u5236\uff09\nlocal CallableHDL = require "LuaCallableHDL"\nlocal clock = CallableHDL("clock", "tb_top.clock")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u4f7f\u7528\u591a\u884c\u683c\u5f0f\u63d0\u9ad8\u53ef\u8bfb\u6027",children:"2. \u4f7f\u7528\u591a\u884c\u683c\u5f0f\u63d0\u9ad8\u53ef\u8bfb\u6027"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u4e8e\u5305\u542b\u591a\u4e2a\u4fe1\u53f7\u7684 Bundle\uff0c\u4f7f\u7528\u591a\u884c\u683c\u5f0f\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u63a8\u8350\nlocal bus = ([[\n    | req_valid\n    | req_ready\n    | req_addr\n    | req_data\n    | resp_valid\n    | resp_data\n]]):bdl { hier = "tb_top.u_bus" }\n\n-- \u4e0d\u63a8\u8350\nlocal bus = ("req_valid|req_ready|req_addr|req_data|resp_valid|resp_data"):bdl { hier = "tb_top.u_bus" }\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u5408\u7406\u4f7f\u7528\u522b\u540d",children:"3. \u5408\u7406\u4f7f\u7528\u522b\u540d"}),"\n",(0,r.jsxs)(n.p,{children:["\u5f53\u4fe1\u53f7\u540d\u79f0\u8fc7\u957f\u6216\u4e0d\u591f\u76f4\u89c2\u65f6\uff0c\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"abdl"})," \u521b\u5efa\u522b\u540d\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local ctrl = ([[\n    | auto_generated_very_long_signal_name_for_start => start\n    | auto_generated_very_long_signal_name_for_done  => done\n]]):abdl { hier = "tb_top.u_ctrl" }\n\n-- \u4f7f\u7528\u7b80\u6d01\u7684\u522b\u540d\nctrl.start:set(1)\nctrl.done:expect(1)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-\u7ed3\u5408-dut-\u4f7f\u7528",children:"4. \u7ed3\u5408 dut \u4f7f\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["SLCP \u53ef\u4ee5\u4e0e ",(0,r.jsx)(n.code,{children:"dut"})," \u4ee3\u7406\u8868\u914d\u5408\u4f7f\u7528\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- \u4f7f\u7528 dut \u83b7\u53d6\u8def\u5f84\uff0c\u518d\u7528 SLCP \u6784\u5efa Bundle\nlocal hier = dut.u_top.u_bus:get_local_path()\nlocal bus = ("valid | ready | data"):bdl { hier = hier }\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsx)(n.p,{children:"SLCP \u662f Verilua \u7684\u6838\u5fc3\u8bbe\u8ba1\u6a21\u5f0f\u4e4b\u4e00\uff0c\u5b83\u901a\u8fc7\u5de7\u5999\u5730\u5229\u7528 Lua \u7684\u8bed\u8a00\u7279\u6027\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u6d01\u3001\u76f4\u89c2\u7684\u65b9\u5f0f\u6765\u6784\u5efa\u5404\u79cd\u6570\u636e\u7ed3\u6784\u3002\u7406\u89e3\u5e76\u5584\u7528\u8fd9\u4e00\u6a21\u5f0f\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u9a8c\u8bc1\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u5f00\u53d1\u6548\u7387\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>i,x:()=>c});var d=l(6540);const r={},a=d.createContext(r);function i(e){const n=d.useContext(a);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),d.createElement(a.Provider,{value:n},e.children)}}}]);