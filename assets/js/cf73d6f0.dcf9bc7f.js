"use strict";(globalThis.webpackChunkverilua_docs=globalThis.webpackChunkverilua_docs||[]).push([[754],{6150:(e,l,d)=>{d.r(l),d.d(l,{assets:()=>r,contentTitle:()=>t,default:()=>x,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"reference/bitvec","title":"BitVec","description":"BitVec \u662f Verilua \u4e2d\u7528\u4e8e\u5904\u7406\u4efb\u610f\u4f4d\u5bbd\u6570\u636e\u7684\u5de5\u5177\u7c7b\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u5957\u4f4d\u7ea7\u64cd\u4f5c\u65b9\u6cd5\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u63d0\u53d6\u548c\u8bbe\u7f6e\u4fe1\u53f7\u4e2d\u7684\u4f4d\u57df\uff0c\u652f\u6301\u8d85\u8fc7 Lua \u539f\u751f\u6574\u6570\u8303\u56f4\u7684\u5927\u4f4d\u5bbd\u6570\u636e\u3002","source":"@site/../docs/reference/bitvec.mdx","sourceDirName":"reference","slug":"/reference/bitvec","permalink":"/verilua/docs/reference/bitvec","draft":false,"unlisted":false,"editUrl":"https://github.com/cyril0124/verilua/tree/master/../docs/reference/bitvec.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u6570\u636e\u7ed3\u6784","permalink":"/verilua/docs/reference/data_structure"},"next":{"title":"StrBitsUtils","permalink":"/verilua/docs/reference/str_bits_utils"}}');var c=d(4848),n=d(8453);const s={},t="BitVec",r={},h=[{value:"\u521b\u5efa BitVec",id:"\u521b\u5efa-bitvec",level:2},{value:"\u8bed\u6cd5",id:"\u8bed\u6cd5",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"\u4ece\u6570\u5b57\u521b\u5efa\uff08\u9ed8\u8ba4 32 \u4f4d\uff09",id:"\u4ece\u6570\u5b57\u521b\u5efa\u9ed8\u8ba4-32-\u4f4d",level:4},{value:"\u4ece\u6570\u5b57\u6307\u5b9a\u4f4d\u5bbd",id:"\u4ece\u6570\u5b57\u6307\u5b9a\u4f4d\u5bbd",level:4},{value:"\u4ece u32 \u8868\u521b\u5efa",id:"\u4ece-u32-\u8868\u521b\u5efa",level:4},{value:"\u4ece\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u521b\u5efa",id:"\u4ece\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u521b\u5efa",level:4},{value:"\u4ece <code>uint64_t</code> cdata \u521b\u5efa",id:"\u4ece-uint64_t-cdata-\u521b\u5efa",level:4},{value:"\u57fa\u672c\u5c5e\u6027",id:"\u57fa\u672c\u5c5e\u6027",level:2},{value:"\u6838\u5fc3\u65b9\u6cd5",id:"\u6838\u5fc3\u65b9\u6cd5",level:2},{value:"\u63d0\u53d6\u4f4d\u57df",id:"\u63d0\u53d6\u4f4d\u57df",level:3},{value:"<code>get_bitfield(s, e)</code>",id:"get_bitfields-e",level:4},{value:"<code>get_bitfield_hex_str(s, e)</code>",id:"get_bitfield_hex_strs-e",level:4},{value:"<code>get_bitfield_vec(s, e)</code>",id:"get_bitfield_vecs-e",level:4},{value:"\u8bbe\u7f6e\u4f4d\u57df",id:"\u8bbe\u7f6e\u4f4d\u57df",level:3},{value:"<code>set_bitfield(s, e, v)</code>",id:"set_bitfields-e-v",level:4},{value:"<code>set_bitfield_hex_str(s, e, hex_str)</code>",id:"set_bitfield_hex_strs-e-hex_str",level:4},{value:"<code>set_bitfield_vec(s, e, u32_vec)</code>",id:"set_bitfield_vecs-e-u32_vec",level:4},{value:"\u66f4\u65b0\u6574\u4e2a\u503c",id:"\u66f4\u65b0\u6574\u4e2a\u503c",level:3},{value:"<code>update_value(data)</code>",id:"update_valuedata",level:4},{value:"\u8f93\u51fa\u4e0e\u8f6c\u6362",id:"\u8f93\u51fa\u4e0e\u8f6c\u6362",level:3},{value:"<code>to_hex_str()</code>",id:"to_hex_str",level:4},{value:"<code>dump_str()</code>",id:"dump_str",level:4},{value:"<code>dump()</code>",id:"dump",level:4},{value:"<code>tonumber()</code>",id:"tonumber",level:4},{value:"<code>tonumber64()</code>",id:"tonumber64",level:4},{value:"\u5b50\u4f4d\u57df\u89c6\u56fe\uff08<code>__call</code>\uff09",id:"\u5b50\u4f4d\u57df\u89c6\u56fe__call",level:3},{value:"\u5143\u65b9\u6cd5",id:"\u5143\u65b9\u6cd5",level:3},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:2},{value:"\u6027\u80fd\u8bf4\u660e",id:"\u6027\u80fd\u8bf4\u660e",level:2},{value:"\u76f8\u5173\u6a21\u5757",id:"\u76f8\u5173\u6a21\u5757",level:2}];function a(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.header,{children:(0,c.jsx)(l.h1,{id:"bitvec",children:"BitVec"})}),"\n",(0,c.jsxs)(l.p,{children:[(0,c.jsx)(l.code,{children:"BitVec"})," \u662f Verilua \u4e2d\u7528\u4e8e\u5904\u7406\u4efb\u610f\u4f4d\u5bbd\u6570\u636e\u7684\u5de5\u5177\u7c7b\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u5957\u4f4d\u7ea7\u64cd\u4f5c\u65b9\u6cd5\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u63d0\u53d6\u548c\u8bbe\u7f6e\u4fe1\u53f7\u4e2d\u7684\u4f4d\u57df\uff0c\u652f\u6301\u8d85\u8fc7 Lua \u539f\u751f\u6574\u6570\u8303\u56f4\u7684\u5927\u4f4d\u5bbd\u6570\u636e\u3002"]}),"\n",(0,c.jsx)(l.h2,{id:"\u521b\u5efa-bitvec",children:"\u521b\u5efa BitVec"}),"\n",(0,c.jsxs)(l.p,{children:[(0,c.jsx)(l.code,{children:"BitVec"})," \u53ef\u4ee5\u4ece\u591a\u79cd\u7c7b\u578b\u521b\u5efa\uff1aLua \u6570\u5b57\u3001Lua \u8868\uff08u32 \u6570\u7ec4\uff09\u3001\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u3001",(0,c.jsx)(l.code,{children:"uint64_t"})," cdata \u7b49\u3002\u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a",(0,c.jsx)(l.code,{children:"data"})," \u548c\u53ef\u9009\u7684 ",(0,c.jsx)(l.code,{children:"bit_width"}),"\u3002"]}),"\n",(0,c.jsx)(l.h3,{id:"\u8bed\u6cd5",children:"\u8bed\u6cd5"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local BitVec = require "verilua.utils.BitVec"\nlocal bv = BitVec(data, bit_width)\n'})}),"\n",(0,c.jsx)(l.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,c.jsx)(l.h4,{id:"\u4ece\u6570\u5b57\u521b\u5efa\u9ed8\u8ba4-32-\u4f4d",children:"\u4ece\u6570\u5b57\u521b\u5efa\uff08\u9ed8\u8ba4 32 \u4f4d\uff09"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0x12345678)                -- 32 \u4f4d\nprint(bv:to_hex_str())  --\x3e "12345678"\n'})}),"\n",(0,c.jsx)(l.h4,{id:"\u4ece\u6570\u5b57\u6307\u5b9a\u4f4d\u5bbd",children:"\u4ece\u6570\u5b57\u6307\u5b9a\u4f4d\u5bbd"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0x12345678, 28)            -- 28 \u4f4d\uff0c\u9ad8\u4f4d\u622a\u65ad\nprint(bv:to_hex_str())  --\x3e "2345678"        -- \u6309\u4f4d\u5bbd\u8fd4\u56de\u6709\u6548\u4f4d\n'})}),"\n",(0,c.jsx)(l.h4,{id:"\u4ece-u32-\u8868\u521b\u5efa",children:"\u4ece u32 \u8868\u521b\u5efa"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec({ 0x12345678, 0x9ABCDEF0 }) -- 64 \u4f4d\nprint(bv:to_hex_str())  --\x3e "9abcdef012345678"\n'})}),"\n",(0,c.jsx)(l.h4,{id:"\u4ece\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u521b\u5efa",children:"\u4ece\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u521b\u5efa"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec("deadbeef")                 -- 32 \u4f4d\nprint(bv:to_hex_str())  --\x3e "deadbeef"\n\nlocal bv = BitVec("deadbeef", 64)             -- 64 \u4f4d\uff0c\u9ad8\u4f4d\u8865\u96f6\nprint(bv:to_hex_str())  --\x3e "00000000deadbeef"\n'})}),"\n",(0,c.jsxs)(l.h4,{id:"\u4ece-uint64_t-cdata-\u521b\u5efa",children:["\u4ece ",(0,c.jsx)(l.code,{children:"uint64_t"})," cdata \u521b\u5efa"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0x1234567890ABCDEFULL)      -- 64 \u4f4d\nprint(bv:to_hex_str())  --\x3e "1234567890abcdef"\n'})}),"\n",(0,c.jsx)(l.h2,{id:"\u57fa\u672c\u5c5e\u6027",children:"\u57fa\u672c\u5c5e\u6027"}),"\n",(0,c.jsxs)(l.table,{children:[(0,c.jsx)(l.thead,{children:(0,c.jsxs)(l.tr,{children:[(0,c.jsx)(l.th,{children:"\u5c5e\u6027"}),(0,c.jsx)(l.th,{children:"\u8bf4\u660e"})]})}),(0,c.jsxs)(l.tbody,{children:[(0,c.jsxs)(l.tr,{children:[(0,c.jsx)(l.td,{children:(0,c.jsx)(l.code,{children:"bv.bit_width"})}),(0,c.jsx)(l.td,{children:"\u4f4d\u5bbd\uff08\u6574\u6570\uff09"})]}),(0,c.jsxs)(l.tr,{children:[(0,c.jsx)(l.td,{children:(0,c.jsx)(l.code,{children:"bv.u32_vec"})}),(0,c.jsx)(l.td,{children:"\u5185\u90e8\u5b58\u50a8\u7684 u32 \u6570\u7ec4\uff08\u53ea\u8bfb\uff09"})]}),(0,c.jsxs)(l.tr,{children:[(0,c.jsx)(l.td,{children:(0,c.jsx)(l.code,{children:"bv.beat_size"})}),(0,c.jsxs)(l.td,{children:["\u6240\u9700\u7684 32 \u4f4d\u5b57\u4e2a\u6570\uff08",(0,c.jsx)(l.code,{children:"ceil(bit_width/32)"}),"\uff09"]})]})]})]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:"local bv = BitVec({ 0x1234, 0x5678 }, 60)\nprint(bv.bit_width)   --\x3e 60\nprint(bv.beat_size)   --\x3e 2\n"})}),"\n",(0,c.jsx)(l.h2,{id:"\u6838\u5fc3\u65b9\u6cd5",children:"\u6838\u5fc3\u65b9\u6cd5"}),"\n",(0,c.jsx)(l.h3,{id:"\u63d0\u53d6\u4f4d\u57df",children:"\u63d0\u53d6\u4f4d\u57df"}),"\n",(0,c.jsx)(l.h4,{id:"get_bitfields-e",children:(0,c.jsx)(l.code,{children:"get_bitfield(s, e)"})}),"\n",(0,c.jsxs)(l.p,{children:["\u63d0\u53d6\u4ece ",(0,c.jsx)(l.code,{children:"s"}),"\uff08LSB\uff09\u5230 ",(0,c.jsx)(l.code,{children:"e"}),"\uff08MSB\uff09\u7684\u4f4d\u57df\uff0c\u8fd4\u56de ",(0,c.jsx)(l.code,{children:"uint64_t"}),"\uff08cdata\uff09\u3002\u8981\u6c42\u4f4d\u57df\u5bbd\u5ea6 \u2264 64\u3002"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:"local bv = BitVec(0x12345678)\nlocal field = bv:get_bitfield(16, 23)        -- \u53d6\u51fa 0x56\nprint(tonumber(field))  --\x3e 0x56\n"})}),"\n",(0,c.jsx)(l.h4,{id:"get_bitfield_hex_strs-e",children:(0,c.jsx)(l.code,{children:"get_bitfield_hex_str(s, e)"})}),"\n",(0,c.jsx)(l.p,{children:"\u63d0\u53d6\u4f4d\u57df\u5e76\u8fd4\u56de\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u3002"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec("deadbeef")\nprint(bv:get_bitfield_hex_str(0, 15))  --\x3e "beef"\n'})}),"\n",(0,c.jsx)(l.h4,{id:"get_bitfield_vecs-e",children:(0,c.jsx)(l.code,{children:"get_bitfield_vec(s, e)"})}),"\n",(0,c.jsx)(l.p,{children:"\u63d0\u53d6\u4f4d\u57df\u5e76\u4ee5 u32 \u8868\u8fd4\u56de\uff08\u5927\u7aef\u5e8f\u6392\u5217\uff09\u3002"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:"local bv = BitVec({ 0x12345678, 0x9ABCDEF0 })\nlocal vec = bv:get_bitfield_vec(32, 63)   --\x3e { 0x9ABCDEF0 }\n"})}),"\n",(0,c.jsx)(l.h3,{id:"\u8bbe\u7f6e\u4f4d\u57df",children:"\u8bbe\u7f6e\u4f4d\u57df"}),"\n",(0,c.jsx)(l.h4,{id:"set_bitfields-e-v",children:(0,c.jsx)(l.code,{children:"set_bitfield(s, e, v)"})}),"\n",(0,c.jsxs)(l.p,{children:["\u5c06 ",(0,c.jsx)(l.code,{children:"s"})," \u5230 ",(0,c.jsx)(l.code,{children:"e"})," \u7684\u4f4d\u57df\u8bbe\u7f6e\u4e3a ",(0,c.jsx)(l.code,{children:"v"}),"\uff08",(0,c.jsx)(l.code,{children:"uint64_t"})," \u6216 Lua \u6570\u5b57\uff09\u3002"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0)\nbv:set_bitfield(0, 31, 0x12345678)\nprint(bv:to_hex_str())  --\x3e "12345678"\n'})}),"\n",(0,c.jsx)(l.h4,{id:"set_bitfield_hex_strs-e-hex_str",children:(0,c.jsx)(l.code,{children:"set_bitfield_hex_str(s, e, hex_str)"})}),"\n",(0,c.jsx)(l.p,{children:"\u4f7f\u7528\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8bbe\u7f6e\u4f4d\u57df\u3002"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0)\nbv:set_bitfield_hex_str(16, 31, "abcd")\nprint(bv:to_hex_str())  --\x3e "abcd0000"\n'})}),"\n",(0,c.jsx)(l.h4,{id:"set_bitfield_vecs-e-u32_vec",children:(0,c.jsx)(l.code,{children:"set_bitfield_vec(s, e, u32_vec)"})}),"\n",(0,c.jsx)(l.p,{children:"\u4f7f\u7528 u32 \u8868\u8bbe\u7f6e\u4f4d\u57df\u3002"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0)\nbv:set_bitfield_vec(0, 63, { 0x12345678, 0x9ABCDEF0 })\nprint(bv:to_hex_str())  --\x3e "9abcdef012345678"\n'})}),"\n",(0,c.jsx)(l.h3,{id:"\u66f4\u65b0\u6574\u4e2a\u503c",children:"\u66f4\u65b0\u6574\u4e2a\u503c"}),"\n",(0,c.jsx)(l.h4,{id:"update_valuedata",children:(0,c.jsx)(l.code,{children:"update_value(data)"})}),"\n",(0,c.jsx)(l.p,{children:"\u7528\u65b0\u6570\u636e\u66ff\u6362 BitVec \u7684\u6574\u4e2a\u503c\u3002\u652f\u6301\u7684\u7c7b\u578b\u4e0e\u6784\u9020\u51fd\u6570\u76f8\u540c\u3002"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0)\nbv:update_value("deadbeef")\nprint(bv:to_hex_str())  --\x3e "deadbeef"\n'})}),"\n",(0,c.jsx)(l.h3,{id:"\u8f93\u51fa\u4e0e\u8f6c\u6362",children:"\u8f93\u51fa\u4e0e\u8f6c\u6362"}),"\n",(0,c.jsx)(l.h4,{id:"to_hex_str",children:(0,c.jsx)(l.code,{children:"to_hex_str()"})}),"\n",(0,c.jsxs)(l.p,{children:["\u8fd4\u56de\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\uff08MSB \u5230 LSB\uff09\uff0c\u5e76\u4e14\u4e25\u683c\u9075\u5faa ",(0,c.jsx)(l.code,{children:"bit_width"}),"\uff1a"]}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:["\u8fd4\u56de\u957f\u5ea6\u662f ",(0,c.jsx)(l.code,{children:"ceil(bit_width/4)"}),"\u3002"]}),"\n",(0,c.jsxs)(l.li,{children:["\u5f53 ",(0,c.jsx)(l.code,{children:"bit_width"})," \u4e0d\u662f 4 \u7684\u500d\u6570\u65f6\uff0c\u6700\u9ad8 nibble \u4f1a\u6309\u6709\u6548\u4f4d\u63a9\u7801\u3002"]}),"\n"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0xFFFFFFFF, 30)\nprint(bv:to_hex_str())  --\x3e "3fffffff"\n\nlocal bv2 = BitVec(0x12345678, 28)\nprint(bv2:to_hex_str()) --\x3e "2345678"\n'})}),"\n",(0,c.jsx)(l.h4,{id:"dump_str",children:(0,c.jsx)(l.code,{children:"dump_str()"})}),"\n",(0,c.jsxs)(l.p,{children:["\u8fd4\u56de\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\uff08\u4e0e ",(0,c.jsx)(l.code,{children:"to_hex_str()"})," \u76f8\u540c\uff09\u3002"]}),"\n",(0,c.jsx)(l.h4,{id:"dump",children:(0,c.jsx)(l.code,{children:"dump()"})}),"\n",(0,c.jsx)(l.p,{children:"\u6253\u5370\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u3002"}),"\n",(0,c.jsx)(l.h4,{id:"tonumber",children:(0,c.jsx)(l.code,{children:"tonumber()"})}),"\n",(0,c.jsx)(l.p,{children:"\u8fd4\u56de\u4f4e 32 \u4f4d\u6570\u503c\uff08Lua \u6570\u5b57\uff09\u3002"}),"\n",(0,c.jsx)(l.h4,{id:"tonumber64",children:(0,c.jsx)(l.code,{children:"tonumber64()"})}),"\n",(0,c.jsxs)(l.p,{children:["\u8fd4\u56de\u6574\u4e2a\u503c\u4f5c\u4e3a ",(0,c.jsx)(l.code,{children:"uint64_t"}),"\uff08cdata\uff09\u3002"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:"local bv = BitVec(0x1234567890ABCDEFULL)\nprint(bv:tonumber())      --\x3e 0x90ABCDEF (\u6570\u5b57)\nprint(bv:tonumber64())    --\x3e 0x1234567890ABCDEFULL\n"})}),"\n",(0,c.jsxs)(l.h3,{id:"\u5b50\u4f4d\u57df\u89c6\u56fe__call",children:["\u5b50\u4f4d\u57df\u89c6\u56fe\uff08",(0,c.jsx)(l.code,{children:"__call"}),"\uff09"]}),"\n",(0,c.jsxs)(l.p,{children:["\u901a\u8fc7 ",(0,c.jsx)(l.code,{children:"bv(s, e)"})," \u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5b50\u4f4d\u57df\u5bf9\u8c61\uff0c\u652f\u6301\u76f4\u63a5\u8bfb\u5199\u8be5\u4f4d\u57df\u7684\u503c\u3002\u8fd9\u662f\u9ad8\u6548\u4e14\u65b9\u4fbf\u7684\u4f4d\u57df\u8bbf\u95ee\u65b9\u5f0f\u3002"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv = BitVec(0x12345678)\nlocal sub = bv(0, 15)      -- \u83b7\u53d6\u4f4e 16 \u4f4d\u7684\u89c6\u56fe\nsub:set(0xABCD)            -- \u8bbe\u7f6e\u4f4e 16 \u4f4d\nprint(bv:to_hex_str())     --\x3e "1234abcd"\n\n-- \u5b50\u4f4d\u57df\u5bf9\u8c61\u4e5f\u652f\u6301\u7c7b\u4f3c\u7684\u65b9\u6cd5\nprint(sub:get_hex_str())   --\x3e "abcd"\n'})}),"\n",(0,c.jsx)(l.p,{children:"\u5b50\u4f4d\u57df\u5bf9\u8c61\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"set(v)"})," / ",(0,c.jsx)(l.code,{children:"set_hex_str(hex_str)"})," / ",(0,c.jsx)(l.code,{children:"set_vec(u32_vec)"})]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"get()"})," / ",(0,c.jsx)(l.code,{children:"get_hex_str()"})," / ",(0,c.jsx)(l.code,{children:"get_vec()"})]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"dump()"})," / ",(0,c.jsx)(l.code,{children:"dump_str()"})]}),"\n",(0,c.jsxs)(l.li,{children:["\u5143\u65b9\u6cd5\uff1a",(0,c.jsx)(l.code,{children:"__tostring"}),", ",(0,c.jsx)(l.code,{children:"__len"}),", ",(0,c.jsx)(l.code,{children:"__eq"})]}),"\n"]}),"\n",(0,c.jsx)(l.h3,{id:"\u5143\u65b9\u6cd5",children:"\u5143\u65b9\u6cd5"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"#bv"}),"\uff1a\u8fd4\u56de\u4f4d\u5bbd\u3002"]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"tostring(bv)"}),"\uff1a\u8fd4\u56de\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\uff08\u7b49\u540c\u4e8e ",(0,c.jsx)(l.code,{children:"dump_str()"}),"\uff09\u3002"]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"bv == other"}),"\uff1a\u6bd4\u8f83\u4e24\u4e2a BitVec \u7684\u503c\u662f\u5426\u76f8\u7b49\u3002"]}),"\n"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local bv1 = BitVec("dead")\nlocal bv2 = BitVec("dead")\nassert(bv1 == bv2)\n\nlocal bv3 = BitVec("beef")\nassert(bv1 ~= bv3)\n\nassert(#bv1 == 16)\n'})}),"\n",(0,c.jsx)(l.h2,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-lua",children:'local BitVec = require "verilua.utils.BitVec"\n\n-- \u521b\u5efa\u4e00\u4e2a 128 \u4f4d\u7684 BitVec\nlocal bv = BitVec("0", 128)\n\n-- \u8bbe\u7f6e\u9ad8 32 \u4f4d\u4e3a 0xdead\nbv(96, 127):set(0xdead)\nprint(bv:to_hex_str())  --\x3e "000000000000000000000000dead0000"\n\n-- \u63d0\u53d6\u4e2d\u95f4 64 \u4f4d\nlocal mid = bv(32, 95)\nprint(mid:get_hex_str()) --\x3e "0000000000000000"\n\n-- \u66f4\u65b0\u8fd9 64 \u4f4d\nmid:set_hex_str("1234567890abcdef")\nprint(bv:to_hex_str())  --\x3e "00000000000000001234567890abcdef"\n\n-- \u68c0\u67e5\u4f4d\u57df\u662f\u5426\u76f8\u7b49\nassert(bv(32, 95) == BitVec("1234567890abcdef", 64))\n'})}),"\n",(0,c.jsx)(l.h2,{id:"\u6027\u80fd\u8bf4\u660e",children:"\u6027\u80fd\u8bf4\u660e"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"BitVec"})," \u5185\u90e8\u4f7f\u7528 ",(0,c.jsx)(l.code,{children:"u32"})," \u6570\u7ec4\u5b58\u50a8\u6570\u636e\uff0c\u6240\u6709\u4f4d\u64cd\u4f5c\u5747\u5728 Lua \u5c42\u9762\u8fdb\u884c\uff0c\u5bf9\u4e8e\u5e38\u7528\u7684\u5c0f\u4f4d\u5bbd\uff08\u226464\uff09\u64cd\u4f5c\u6548\u7387\u8f83\u9ad8\u3002"]}),"\n",(0,c.jsxs)(l.li,{children:["\u5bf9\u4e8e\u5927\u4f4d\u5bbd\uff08>64\uff09\u4e14\u9891\u7e41\u7684\u64cd\u4f5c\uff0c\u5efa\u8bae\u4f7f\u7528\u5b50\u4f4d\u57df\u89c6\u56fe\u6216\u76f4\u63a5\u64cd\u4f5c ",(0,c.jsx)(l.code,{children:"u32_vec"})," \u4ee5\u63d0\u9ad8\u6027\u80fd\u3002"]}),"\n",(0,c.jsxs)(l.li,{children:["\u4f4d\u57df\u5bbd\u5ea6\u8d85\u8fc7 64 \u65f6\uff0c",(0,c.jsx)(l.code,{children:"get_bitfield"})," \u548c ",(0,c.jsx)(l.code,{children:"set_bitfield"})," \u65e0\u6cd5\u4f7f\u7528\uff0c\u5e94\u4f7f\u7528 ",(0,c.jsx)(l.code,{children:"get_bitfield_hex_str"}),"/",(0,c.jsx)(l.code,{children:"set_bitfield_hex_str"})," \u6216 ",(0,c.jsx)(l.code,{children:"get_bitfield_vec"}),"/",(0,c.jsx)(l.code,{children:"set_bitfield_vec"})," \u65b9\u6cd5\u3002"]}),"\n"]}),"\n",(0,c.jsx)(l.h2,{id:"\u76f8\u5173\u6a21\u5757",children:"\u76f8\u5173\u6a21\u5757"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.a,{href:"/verilua/docs/reference/data_structure#callablehdl",children:"CallableHDL"})," \u4e2d\u63d0\u4f9b\u4e86 ",(0,c.jsx)(l.code,{children:"get_bitvec()"})," \u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u4ece\u4fe1\u53f7\u83b7\u53d6 ",(0,c.jsx)(l.code,{children:"BitVec"})," \u5bf9\u8c61\u3002"]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.a,{href:"/verilua/docs/reference/str_bits_utils",children:"StrBitsUtils"})," \u63d0\u4f9b\u4e86\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u4f4d\u64cd\u4f5c\u5de5\u5177\u3002"]}),"\n"]})]})}function x(e={}){const{wrapper:l}={...(0,n.R)(),...e.components};return l?(0,c.jsx)(l,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453:(e,l,d)=>{d.d(l,{R:()=>s,x:()=>t});var i=d(6540);const c={},n=i.createContext(c);function s(e){const l=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),i.createElement(n.Provider,{value:l},e.children)}}}]);