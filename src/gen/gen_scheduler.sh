export LJP_NO_CACHE=1
export LJP_OUT_DIR="./out"
export LJP_GEN_ONLY=1
export SAFETY=0

info_str="----------------------------------------------------\n-- Auto generated by gen_scheduler.lua\n-- DO NOT edit this file!\n----------------------------------------------------\n"

export ACC_TIME=0
export NORMAL=1
export STEP=0
export EDGE_STEP=0
scheduler_name="LuaNormalSchedulerV2"
file=$VERILUA_HOME/src/lua/verilua/scheduler/$scheduler_name.lua
luajit gen_scheduler.lua
mv ./out/gen_scheduler.lua ./out/$scheduler_name.lua
cp ./out/$scheduler_name.lua $file
sed -i "1i\\$info_str" $file
sed -i "s/verilua\.LuaScheduler_gen/verilua.LuaScheduler_gen_$scheduler_name/g" $file

export ACC_TIME=0
export NORMAL=0
export STEP=1
export EDGE_STEP=0
scheduler_name="LuaStepSchedulerV2"
file=$VERILUA_HOME/src/lua/verilua/scheduler/$scheduler_name.lua
luajit gen_scheduler.lua
mv ./out/gen_scheduler.lua ./out/$scheduler_name.lua
cp ./out/$scheduler_name.lua $file
sed -i "1i\\$info_str" $file
sed -i "s/verilua\.LuaScheduler_gen/verilua.LuaScheduler_gen_$scheduler_name/g" $file

export ACC_TIME=0
export NORMAL=0
export STEP=0
export EDGE_STEP=1
scheduler_name="LuaEdgeStepSchedulerV2"
file=$VERILUA_HOME/src/lua/verilua/scheduler/$scheduler_name.lua
luajit gen_scheduler.lua
mv ./out/gen_scheduler.lua ./out/$scheduler_name.lua
cp ./out/$scheduler_name.lua $file
sed -i "1i\\$info_str" $file
sed -i "s/verilua\.LuaScheduler_gen/verilua.LuaScheduler_gen_$scheduler_name/g" $file

export ACC_TIME=1
export NORMAL=1
export STEP=0
export EDGE_STEP=0
scheduler_name="LuaNormalSchedulerV2P"
file=$VERILUA_HOME/src/lua/verilua/scheduler/$scheduler_name.lua
luajit gen_scheduler.lua
mv ./out/gen_scheduler.lua ./out/$scheduler_name.lua
cp ./out/$scheduler_name.lua $file
sed -i "1i\\$info_str" $file
sed -i "s/verilua\.LuaScheduler_gen/verilua.LuaScheduler_gen_$scheduler_name/g" $file

export ACC_TIME=1
export NORMAL=0
export STEP=1
export EDGE_STEP=0
scheduler_name="LuaStepSchedulerV2P"
file=$VERILUA_HOME/src/lua/verilua/scheduler/$scheduler_name.lua
luajit gen_scheduler.lua
mv ./out/gen_scheduler.lua ./out/$scheduler_name.lua
cp ./out/$scheduler_name.lua $file
sed -i "1i\\$info_str" $file
sed -i "s/verilua\.LuaScheduler_gen/verilua.LuaScheduler_gen_$scheduler_name/g" $file

export ACC_TIME=1
export NORMAL=0
export STEP=0
export EDGE_STEP=1
scheduler_name="LuaEdgeStepSchedulerV2P"
file=$VERILUA_HOME/src/lua/verilua/scheduler/$scheduler_name.lua
luajit gen_scheduler.lua
mv ./out/gen_scheduler.lua ./out/$scheduler_name.lua
cp ./out/$scheduler_name.lua $file
sed -i "1i\\$info_str" $file
sed -i "s/verilua\.LuaScheduler_gen/verilua.LuaScheduler_gen_$scheduler_name/g" $file

