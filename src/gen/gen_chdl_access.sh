
set -e

export LJP_NO_CACHE=1
export LJP_OUT_DIR="./out"
export LJP_GEN_ONLY=1

info_str="---@diagnostic disable: redundant-parameter\n----------------------------------------------------\n-- Auto generated by gen_chdl_access.tl\n-- DO NOT edit this file!\n----------------------------------------------------\n"

export IS_SINGLE=1
export IS_DOUBLE=0
export IS_MULTI=0
file=$VERILUA_HOME/src/lua/verilua/handles/ChdlAccessSingle.lua
luajit gen_chdl_access.lua
mv ./out/gen_chdl_access.lua ./out/ChdlAccessSingle.lua
sed -i "1i\\$info_str" ./out/ChdlAccessSingle.lua
cp ./out/ChdlAccessSingle.lua $file


export IS_SINGLE=0
export IS_DOUBLE=1
export IS_MULTI=0
file=$VERILUA_HOME/src/lua/verilua/handles/ChdlAccessDouble.lua
luajit gen_chdl_access.lua
mv ./out/gen_chdl_access.lua ./out/ChdlAccessDouble.lua
sed -i "1i\\$info_str" ./out/ChdlAccessDouble.lua
cp ./out/ChdlAccessDouble.lua $file


export IS_SINGLE=0
export IS_DOUBLE=0
export IS_MULTI=1
file=$VERILUA_HOME/src/lua/verilua/handles/ChdlAccessMulti.lua
luajit gen_chdl_access.lua
mv ./out/gen_chdl_access.lua ./out/ChdlAccessMulti.lua
sed -i "1i\\$info_str" ./out/ChdlAccessMulti.lua
cp ./out/ChdlAccessMulti.lua $file
